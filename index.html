<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å®¶è¨ˆç°¿ã‚¢ãƒ—ãƒª</title>
<style>
  /* ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
  .styled-button {
    background-color: #32b3d0;
    /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®èƒŒæ™¯è‰² */
    border: none;
    color: white;
    padding: 10px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    transition-duration: 0.4s;
    cursor: pointer;
    border-radius: 50px;
    /* ä¸¸ã¿ã‚’è¿½åŠ  */
  }

  /* ãƒ›ãƒãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ */
  .styled-button:hover {
    background-color: #da1eb1;
    /* ãƒ›ãƒãƒ¼æ™‚ã®èƒŒæ™¯è‰² */
  }

  /* ä¸­å¤®æƒãˆ */
  .center-align {
    text-align: center;
  }

 /* ãƒ­ã‚´ç”»åƒã®ã‚¹ã‚¿ã‚¤ãƒ« */
 .logo-container {
    text-align: center;
  }

  .logo {
    display: inline-block;
  }


</style>
</head>
<body>

<!-- ã‚¿ã‚¤ãƒˆãƒ« -->
<div class="logo-container">
  <h1><img src="img/kakeibo2.png" alt="" class="logo"></h1>
</div>

<div class="center-align">
  <form id="expense-form">
    <label for="date">æ—¥ä»˜:</label>
    <input type="date" id="date" name="date">
    <br>
    <br>
    <label for="item">é …ç›®:ã€€</label>
    <select id="item" name="item">
      <option value="é£Ÿäº‹">ğŸ´é£Ÿäº‹ğŸ´</option>
      <option value="æ—¥ç”¨å“">ğŸ§¹æ—¥ç”¨å“ğŸ§»</option>
      <option value="äº¤é€šè²»">ğŸšäº¤é€šè²»ğŸš—</option>
      <option value="è¡£æœ">ğŸ‘”è¡£æœğŸ‘š</option>
      <option value="äº¤éš›è²»">â¤ï¸äº¤éš›è²»â¤ï¸</option>
      <option value="è¶£å‘³">ğŸ¸è¶£å‘³ğŸ¨ğŸµ</option>
      <option value="ã‚³ã‚¹ãƒ¡">ğŸ§´ã‚³ã‚¹ãƒ¡ğŸ’„</option>
      <option value="to">to</option> <!-- æ–°ãŸã«è¿½åŠ  -->
    </select>
    <br>
    <br>
    <label for="amount">é‡‘é¡:</label>
    <input type="number" id="amount" name="amount" min="0">
    <span>å††</span> <!-- é‡‘é¡ã®è¡¨ç¤ºã«å††ã‚’è¿½åŠ  -->
    <br>
    <br>
    <!-- ãƒœã‚¿ãƒ³ã«ã‚¯ãƒ©ã‚¹ã‚’ä»˜ã‘ã¦ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨ -->
    <button type="button" class="styled-button" id="submit-button">è¿½åŠ </button>
  </form>

  <div id="total-amount"></div>

</div>

<div id="expenses-list">
  <!-- ã“ã“ã«å®¶è¨ˆç°¿ã®ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ -->
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
  // Firebaseã®æ§‹æˆ
  const firebaseConfig = {
    apiKey: "AIzaSyD_xC9EWLjBaooDsBOj3KPMhIqoffTc7Wc",
    authDomain: "kakeibo2-3a6cd.firebaseapp.com",
    databaseURL: "https://kakeibo2-3a6cd-default-rtdb.firebaseio.com",
    projectId: "kakeibo2-3a6cd",
    storageBucket: "kakeibo2-3a6cd.appspot.com",
    messagingSenderId: "872262479811",
    appId: "1:872262479811:web:9a9e916a7ea0a1588b9776"
  };

  // FirebaseåˆæœŸåŒ–
  firebase.initializeApp(firebaseConfig);

  // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å‚ç…§ã‚’å–å¾—
  const db = firebase.database();
  const dbRef = db.ref("expenses");

  // ãƒœã‚¿ãƒ³è¦ç´ ã‚’å–å¾—
  const submitButton = document.getElementById('submit-button');

  // ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼åˆæœŸåŒ–
  let counter = 0;

  // åˆè¨ˆé‡‘é¡ã®åˆæœŸåŒ–
  let totalAmount = 0;

  // ãƒœã‚¿ãƒ³ã«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
  submitButton.addEventListener('click', () => {
    // ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰æ—¥ä»˜ã€é …ç›®ã€é‡‘é¡ã‚’å–å¾—
    const date = document.getElementById('date').value;
    const item = document.getElementById('item').value;
    const amount = parseInt(document.getElementById('amount').value); // é‡‘é¡ã‚’æ•´æ•°ã«å¤‰æ›

    // ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ã¦3å›ç›®ã®ãƒ‡ãƒ¼ã‚¿ç™»éŒ²æ™‚ã«ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡¨ç¤º
    counter++;
    if (counter === 3) {
      alert("ãŠé‡‘ä½¿ã„ã™ãæ³¨æ„ï¼");
    }

    // ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã®éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†ç”Ÿ
    const clickSound = new Audio('./sounds/é¸æŠ2.mp3');
    clickSound.play();

    // Firebase Realtime Databaseã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡
    const expenseData = {
      date: date,
      item: item,
      amount: amount
    };
    dbRef.push(expenseData);

    // åˆè¨ˆé‡‘é¡ã‚’æ›´æ–°
    totalAmount += amount;

    // åˆè¨ˆé‡‘é¡ã‚’è¡¨ç¤ºã™ã‚‹è¦ç´ ã«è¡¨ç¤º
    const totalAmountElement = document.getElementById('total-amount');
    totalAmountElement.textContent = `åˆè¨ˆé‡‘é¡: ${totalAmount}å††`;
  });

  // Firebase Realtime Databaseã«ãƒ‡ãƒ¼ã‚¿ãŒè¿½åŠ ã•ã‚ŒãŸã¨ãã®å‡¦ç†
  dbRef.on("child_added", function(snapshot) {
    const expenseData = snapshot.val();
    const key = snapshot.key;
    // è¡¨ç¤ºç”¨ã®å‡¦ç†ã‚’è¿½åŠ 
    const expenseElement = document.createElement("div");
    expenseElement.textContent = `æ—¥ä»˜: ${expenseData.date}, é …ç›®: ${expenseData.item}, é‡‘é¡: ${expenseData.amount}å††`; // é‡‘é¡ã®è¡¨ç¤ºã«å††ã‚’è¿½åŠ 
    document.getElementById("expenses-list").appendChild(expenseElement);
  });
</script>

</body>
</html>


